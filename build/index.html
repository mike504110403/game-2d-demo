<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¥“ä¹‹è°·é¢¨æ ¼æ©«å‘æ²è»¸éŠæˆ²</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom, #87CEEB, #E0F6FF);
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        
        #gameContainer {
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }
        
        #gameCanvas {
            border: 2px solid #333;
            background: linear-gradient(to bottom, #87CEEB, #90EE90);
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
        }
        
        #gameInfo {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            z-index: 100;
        }
        
        #controls {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            z-index: 100;
        }
        
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 24px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <div id="gameInfo">
            <h2>ğŸ® æ¥“ä¹‹è°·é¢¨æ ¼æ©«å‘æ²è»¸éŠæˆ²</h2>
            <p>ç‰ˆæœ¬: 1.0.0 | ç‹€æ…‹: è¼‰å…¥ä¸­...</p>
        </div>
        
        <div id="controls">
            <h3>ğŸ¯ éŠæˆ²æ§åˆ¶</h3>
            <p>ğŸ”„ A/D æˆ– â†/â†’ : ç§»å‹•</p>
            <p>ğŸ¦˜ ç©ºç™½éµ æˆ– W/â†‘ : è·³èº</p>
            <p>âš”ï¸ J éµ : æ”»æ“Š</p>
        </div>
        
        <div class="loading" id="loading">
            <div>ğŸ® æ­£åœ¨è¼‰å…¥éŠæˆ²...</div>
            <div style="font-size: 16px; margin-top: 10px;">è«‹ç¨å€™ï¼Œæ­£åœ¨åˆå§‹åŒ–æ¥“ä¹‹è°·é¢¨æ ¼å ´æ™¯</div>
        </div>
        
        <canvas id="gameCanvas" width="800" height="600" style="display: none;"></canvas>
    </div>

    <script>
        // ç°¡å–®çš„ 2D éŠæˆ²å¼•æ“
        class SimpleGame {
            constructor() {
                this.canvas = document.getElementById('gameCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.width = this.canvas.width;
                this.height = this.canvas.height;
                
                // éŠæˆ²ç‹€æ…‹
                this.gameState = 'loading';
                this.player = {
                    x: 100,
                    y: 400,
                    width: 50,
                    height: 80,
                    velocityX: 0,
                    velocityY: 0,
                    onGround: false,
                    facingRight: true
                };
                
                this.platforms = [];
                this.backgrounds = [];
                this.keys = {};
                
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.createBackgrounds();
                this.createPlatforms();
                this.startGame();
            }
            
            setupEventListeners() {
                // éµç›¤äº‹ä»¶
                document.addEventListener('keydown', (e) => {
                    this.keys[e.code] = true;
                    e.preventDefault();
                });
                
                document.addEventListener('keyup', (e) => {
                    this.keys[e.code] = false;
                    e.preventDefault();
                });
            }
            
            createBackgrounds() {
                // å¤©ç©ºèƒŒæ™¯
                this.backgrounds.push({
                    type: 'sky',
                    x: 0,
                    y: 0,
                    width: this.width,
                    height: this.height * 0.6,
                    color: '#87CEEB'
                });
                
                // å±±è„ˆèƒŒæ™¯
                this.backgrounds.push({
                    type: 'mountain',
                    x: 0,
                    y: this.height * 0.4,
                    width: this.width,
                    height: this.height * 0.4,
                    color: '#8B7355'
                });
                
                // æ¨¹æœ¨èƒŒæ™¯
                for (let i = 0; i < 5; i++) {
                    this.backgrounds.push({
                        type: 'tree',
                        x: i * 200 - 100,
                        y: this.height * 0.6,
                        width: 100,
                        height: 200,
                        color: '#228B22'
                    });
                }
            }
            
            createPlatforms() {
                // åœ°é¢
                this.platforms.push({
                    x: 0,
                    y: this.height - 50,
                    width: this.width,
                    height: 50,
                    color: '#90EE90'
                });
                
                // æµ®ç©ºå¹³å°
                for (let i = 0; i < 5; i++) {
                    this.platforms.push({
                        x: 200 + i * 150,
                        y: 400 - i * 50,
                        width: 120,
                        height: 20,
                        color: '#8B4513'
                    });
                }
            }
            
            startGame() {
                setTimeout(() => {
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('gameCanvas').style.display = 'block';
                    this.gameState = 'playing';
                    this.gameLoop();
                }, 2000);
            }
            
            update() {
                if (this.gameState !== 'playing') return;
                
                // è™•ç†è¼¸å…¥
                this.handleInput();
                
                // æ›´æ–°ç©å®¶ç‰©ç†
                this.updatePlayer();
                
                // æ›´æ–°ç›¸æ©Ÿ
                this.updateCamera();
            }
            
            handleInput() {
                // ç§»å‹•
                if (this.keys['KeyA'] || this.keys['ArrowLeft']) {
                    this.player.velocityX = -5;
                    this.player.facingRight = false;
                } else if (this.keys['KeyD'] || this.keys['ArrowRight']) {
                    this.player.velocityX = 5;
                    this.player.facingRight = true;
                } else {
                    this.player.velocityX *= 0.8; // æ‘©æ“¦åŠ›
                }
                
                // è·³èº
                if ((this.keys['Space'] || this.keys['KeyW'] || this.keys['ArrowUp']) && this.player.onGround) {
                    this.player.velocityY = -15;
                    this.player.onGround = false;
                }
            }
            
            updatePlayer() {
                // é‡åŠ›
                this.player.velocityY += 0.8;
                
                // æ›´æ–°ä½ç½®
                this.player.x += this.player.velocityX;
                this.player.y += this.player.velocityY;
                
                // æª¢æŸ¥å¹³å°ç¢°æ’
                this.checkPlatformCollisions();
                
                // é‚Šç•Œæª¢æŸ¥
                if (this.player.x < 0) this.player.x = 0;
                if (this.player.x > this.width - this.player.width) {
                    this.player.x = this.width - this.player.width;
                }
            }
            
            checkPlatformCollisions() {
                this.player.onGround = false;
                
                for (let platform of this.platforms) {
                    if (this.player.x < platform.x + platform.width &&
                        this.player.x + this.player.width > platform.x &&
                        this.player.y < platform.y + platform.height &&
                        this.player.y + this.player.height > platform.y) {
                        
                        // å¾ä¸Šæ–¹è½åœ¨å¹³å°ä¸Š
                        if (this.player.velocityY > 0 && this.player.y < platform.y) {
                            this.player.y = platform.y - this.player.height;
                            this.player.velocityY = 0;
                            this.player.onGround = true;
                        }
                    }
                }
            }
            
            updateCamera() {
                // ç°¡å–®çš„ç›¸æ©Ÿè·Ÿéš¨
                const targetX = this.player.x - this.width / 2;
                this.cameraX = Math.max(0, Math.min(targetX, this.width * 2 - this.width));
            }
            
            render() {
                // æ¸…ç©ºç•«å¸ƒ
                this.ctx.clearRect(0, 0, this.width, this.height);
                
                // ç¹ªè£½èƒŒæ™¯
                this.drawBackgrounds();
                
                // ç¹ªè£½å¹³å°
                this.drawPlatforms();
                
                // ç¹ªè£½ç©å®¶
                this.drawPlayer();
                
                // ç¹ªè£½ UI
                this.drawUI();
            }
            
            drawBackgrounds() {
                for (let bg of this.backgrounds) {
                    this.ctx.fillStyle = bg.color;
                    
                    if (bg.type === 'sky') {
                        const gradient = this.ctx.createLinearGradient(0, 0, 0, bg.height);
                        gradient.addColorStop(0, '#87CEEB');
                        gradient.addColorStop(1, '#E0F6FF');
                        this.ctx.fillStyle = gradient;
                    }
                    
                    this.ctx.fillRect(bg.x, bg.y, bg.width, bg.height);
                    
                    if (bg.type === 'tree') {
                        // ç¹ªè£½æ¨¹å¹¹
                        this.ctx.fillStyle = '#8B4513';
                        this.ctx.fillRect(bg.x + 45, bg.y + 100, 10, 100);
                        
                        // ç¹ªè£½æ¨¹è‘‰
                        this.ctx.fillStyle = '#228B22';
                        this.ctx.beginPath();
                        this.ctx.arc(bg.x + 50, bg.y + 100, 40, 0, Math.PI * 2);
                        this.ctx.fill();
                    }
                }
            }
            
            drawPlatforms() {
                for (let platform of this.platforms) {
                    this.ctx.fillStyle = platform.color;
                    this.ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
                    
                    // å¹³å°é‚Šæ¡†
                    this.ctx.strokeStyle = '#654321';
                    this.ctx.lineWidth = 2;
                    this.ctx.strokeRect(platform.x, platform.y, platform.width, platform.height);
                }
            }
            
            drawPlayer() {
                this.ctx.save();
                
                // ç¿»è½‰ç©å®¶é¢å‘
                if (!this.player.facingRight) {
                    this.ctx.scale(-1, 1);
                    this.ctx.translate(-this.player.x * 2 - this.player.width, 0);
                }
                
                // ç¹ªè£½ç©å®¶
                this.ctx.fillStyle = '#FFDBAC'; // çš®è†šè‰²
                this.ctx.fillRect(this.player.x, this.player.y, this.player.width, this.player.height);
                
                // é ­éƒ¨
                this.ctx.fillStyle = '#FFDBAC';
                this.ctx.beginPath();
                this.ctx.arc(this.player.x + 25, this.player.y + 60, 15, 0, Math.PI * 2);
                this.ctx.fill();
                
                // èº«é«”
                this.ctx.fillStyle = '#FF6B6B';
                this.ctx.fillRect(this.player.x + 20, this.player.y + 30, 10, 30);
                
                // è…¿éƒ¨
                this.ctx.fillStyle = '#4ECDC4';
                this.ctx.fillRect(this.player.x + 18, this.player.y + 10, 6, 20);
                this.ctx.fillRect(this.player.x + 26, this.player.y + 10, 6, 20);
                
                // æ‰‹è‡‚
                this.ctx.fillStyle = '#FFDBAC';
                this.ctx.fillRect(this.player.x + 15, this.player.y + 35, 5, 15);
                this.ctx.fillRect(this.player.x + 30, this.player.y + 35, 5, 15);
                
                this.ctx.restore();
            }
            
            drawUI() {
                // ç¹ªè£½ç”Ÿå‘½å€¼æ¢
                this.ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                this.ctx.fillRect(10, 10, 200, 20);
                
                this.ctx.fillStyle = '#00FF00';
                this.ctx.fillRect(10, 10, 180, 20);
                
                this.ctx.fillStyle = 'white';
                this.ctx.font = '14px Arial';
                this.ctx.fillText('ç”Ÿå‘½å€¼: 100%', 15, 25);
            }
            
            gameLoop() {
                this.update();
                this.render();
                requestAnimationFrame(() => this.gameLoop());
            }
        }
        
        // å•Ÿå‹•éŠæˆ²
        window.addEventListener('load', () => {
            new SimpleGame();
        });
    </script>
</body>
</html>
