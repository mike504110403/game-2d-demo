<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éœæ…‹æª”æ¡ˆæ¸¬è©¦é é¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f0f0f0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        .file-list {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .file-item {
            padding: 5px 0;
            border-bottom: 1px solid #dee2e6;
        }
        .file-item:last-child {
            border-bottom: none;
        }
        .btn {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .btn:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® æ¥“ä¹‹è°·é¢¨æ ¼éŠæˆ² - éœæ…‹æª”æ¡ˆæ¸¬è©¦</h1>
        
        <div id="status-container">
            <div class="status info">
                <strong>ğŸ“ æ­£åœ¨æª¢æŸ¥éœæ…‹æª”æ¡ˆçµæ§‹...</strong>
            </div>
        </div>
        
        <div id="file-structure">
            <h3>ğŸ“‚ æª”æ¡ˆçµæ§‹æª¢æŸ¥</h3>
            <div id="file-list" class="file-list">
                <div class="file-item">ğŸ”„ æ­£åœ¨è¼‰å…¥æª”æ¡ˆåˆ—è¡¨...</div>
            </div>
        </div>
        
        <div id="actions">
            <button class="btn" onclick="checkAssets()">ğŸ” é‡æ–°æª¢æŸ¥æª”æ¡ˆ</button>
            <button class="btn" onclick="goToGame()">ğŸ® å‰å¾€éŠæˆ²</button>
            <button class="btn" onclick="goToHome()">ğŸ  è¿”å›é¦–é </button>
        </div>
        
        <div id="results">
            <h3>ğŸ“Š æª¢æŸ¥çµæœ</h3>
            <div id="results-content">
                <div class="status info">ç­‰å¾…æª¢æŸ¥å®Œæˆ...</div>
            </div>
        </div>
    </div>

    <script>
        // æª¢æŸ¥éœæ…‹æª”æ¡ˆ
        async function checkAssets() {
            const statusContainer = document.getElementById('status-container');
            const fileList = document.getElementById('file-list');
            const resultsContent = document.getElementById('results-content');
            
            // æ¸…ç©ºçµæœ
            fileList.innerHTML = '';
            resultsContent.innerHTML = '';
            
            // é¡¯ç¤ºæª¢æŸ¥ä¸­ç‹€æ…‹
            statusContainer.innerHTML = '<div class="status info"><strong>ğŸ” æ­£åœ¨æª¢æŸ¥éœæ…‹æª”æ¡ˆ...</strong></div>';
            
            // è¦æª¢æŸ¥çš„æª”æ¡ˆè·¯å¾‘
            const assetsToCheck = [
                { path: 'assets/scenes/GamePlay.fire', name: 'éŠæˆ²å ´æ™¯', type: 'scene' },
                { path: 'assets/scripts/components/PlayerController.js', name: 'ç©å®¶æ§åˆ¶å™¨', type: 'script' },
                { path: 'assets/scripts/components/CameraFollow.js', name: 'ç›¸æ©Ÿè·Ÿéš¨', type: 'script' },
                { path: 'assets/scripts/managers/GameManager.js', name: 'éŠæˆ²ç®¡ç†å™¨', type: 'script' },
                { path: 'assets/scripts/managers/InputManager.js', name: 'è¼¸å…¥ç®¡ç†å™¨', type: 'script' },
                { path: 'assets/scripts/GameStarter.ts', name: 'éŠæˆ²å•Ÿå‹•å™¨', type: 'script' },
                { path: 'assets/scripts/scenes/MapleStoryScene.ts', name: 'æ¥“ä¹‹è°·å ´æ™¯', type: 'script' },
                { path: 'assets/scripts/utils/SceneLoader.ts', name: 'å ´æ™¯è¼‰å…¥å™¨', type: 'script' }
            ];
            
            let successCount = 0;
            let totalCount = assetsToCheck.length;
            
            // æª¢æŸ¥æ¯å€‹æª”æ¡ˆ
            for (const asset of assetsToCheck) {
                try {
                    const response = await fetch(asset.path);
                    const status = response.ok ? 'success' : 'error';
                    const icon = response.ok ? 'âœ…' : 'âŒ';
                    const message = response.ok ? 'æª”æ¡ˆå­˜åœ¨' : 'æª”æ¡ˆä¸å­˜åœ¨';
                    
                    if (response.ok) successCount++;
                    
                    fileList.innerHTML += `
                        <div class="file-item">
                            <strong>${icon} ${asset.name}</strong> 
                            <span style="color: ${response.ok ? 'green' : 'red'}">${message}</span>
                            <br><small>è·¯å¾‘: ${asset.path}</small>
                        </div>
                    `;
                } catch (error) {
                    fileList.innerHTML += `
                        <div class="file-item">
                            <strong>âŒ ${asset.name}</strong> 
                            <span style="color: red">è¼‰å…¥å¤±æ•—</span>
                            <br><small>è·¯å¾‘: ${asset.path}</small>
                        </div>
                    `;
                }
            }
            
            // é¡¯ç¤ºçµæœ
            const successRate = Math.round((successCount / totalCount) * 100);
            const resultClass = successRate >= 80 ? 'success' : successRate >= 50 ? 'info' : 'error';
            
            resultsContent.innerHTML = `
                <div class="status ${resultClass}">
                    <strong>ğŸ“Š æª¢æŸ¥å®Œæˆï¼</strong><br>
                    æˆåŠŸ: ${successCount}/${totalCount} æª”æ¡ˆ (${successRate}%)<br>
                    ${successRate >= 80 ? 'ğŸ‰ æª”æ¡ˆçµæ§‹è‰¯å¥½ï¼' : successRate >= 50 ? 'âš ï¸ éƒ¨åˆ†æª”æ¡ˆç¼ºå¤±' : 'âŒ éœ€è¦æª¢æŸ¥æª”æ¡ˆçµæ§‹'}
                </div>
            `;
            
            statusContainer.innerHTML = `
                <div class="status ${resultClass}">
                    <strong>âœ… éœæ…‹æª”æ¡ˆæª¢æŸ¥å®Œæˆ</strong><br>
                    æˆåŠŸè¼‰å…¥ ${successCount} å€‹æª”æ¡ˆï¼ŒæˆåŠŸç‡ ${successRate}%
                </div>
            `;
        }
        
        // å‰å¾€éŠæˆ²
        function goToGame() {
            window.location.href = '/';
        }
        
        // è¿”å›é¦–é 
        function goToHome() {
            window.location.href = '/';
        }
        
        // é é¢è¼‰å…¥æ™‚è‡ªå‹•æª¢æŸ¥
        window.addEventListener('load', () => {
            setTimeout(checkAssets, 500);
        });
    </script>
</body>
</html>
