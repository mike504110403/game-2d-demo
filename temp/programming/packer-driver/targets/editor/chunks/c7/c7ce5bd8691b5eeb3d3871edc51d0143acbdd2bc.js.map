{"version":3,"sources":["file:///Users/mike/Documents/self/game-2d-demo/assets/scripts/components/PlayerController.js"],"names":["_cjsLoader","__cjsMetaURL","url","define","exports","require","module","__filename","__dirname","cc","Class","extends","Component","properties","rigidBody","default","type","RigidBody2D","sprite","Sprite","speed","Float","jumpForce","onLoad","isGrounded","isMoving","facingRight","initializePlayer","start","setupInput","update","deltaTime","handleInput","updatePlayerState","console","log","systemEvent","on","SystemEvent","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","event","keyCode","macro","KEY","left","a","moveLeft","right","d","moveRight","space","up","w","jump","stopMoving","linearVelocity","v2","y","x","velocity","updateSprite","node","scaleX","_cjsExports"],"mappings":"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","sourcesContent":["import _cjsLoader from 'cce:/internal/ml/cjs-loader.mjs';\nlet _cjsExports;\nconst __cjsMetaURL = import.meta.url;\n_cjsLoader.define(__cjsMetaURL, function (exports, require, module, __filename, __dirname) {\n// #region ORIGINAL CODE\n\n\n cc.Class({\n     extends: cc.Component,\n\n     properties: {\n         rigidBody: {\n             default: null,\n             type: cc.RigidBody2D\n         },\n         sprite: {\n             default: null,\n             type: cc.Sprite\n         },\n         speed: {\n             default: 200,\n             type: cc.Float\n         },\n         jumpForce: {\n             default: 500,\n             type: cc.Float\n         }\n     },\n\n     onLoad() {\n         this.isGrounded = false;\n         this.isMoving = false;\n         this.facingRight = true;\n         this.initializePlayer();\n     },\n\n     start() {\n         this.setupInput();\n     },\n\n     update(deltaTime) {\n         this.handleInput();\n         this.updatePlayerState();\n     },\n\n     /**\n      * 初始化玩家\n      */\n     initializePlayer() {\n         console.log('玩家控制器初始化完成');\n     },\n\n     /**\n      * 設定輸入系統\n      */\n     setupInput() {\n         // 註冊鍵盤事件\n         cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n         cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n     },\n\n     /**\n      * 鍵盤按下事件\n      */\n     onKeyDown(event) {\n         switch(event.keyCode) {\n             case cc.macro.KEY.left:\n             case cc.macro.KEY.a:\n                 this.moveLeft();\n                 break;\n             case cc.macro.KEY.right:\n             case cc.macro.KEY.d:\n                 this.moveRight();\n                 break;\n             case cc.macro.KEY.space:\n             case cc.macro.KEY.up:\n             case cc.macro.KEY.w:\n                 this.jump();\n                 break;\n         }\n     },\n\n     /**\n      * 鍵盤釋放事件\n      */\n     onKeyUp(event) {\n         switch(event.keyCode) {\n             case cc.macro.KEY.left:\n             case cc.macro.KEY.a:\n             case cc.macro.KEY.right:\n             case cc.macro.KEY.d:\n                 this.stopMoving();\n                 break;\n         }\n     },\n\n     /**\n      * 處理輸入\n      */\n     handleInput() {\n         // 輸入處理邏輯\n     },\n\n     /**\n      * 向左移動\n      */\n     moveLeft() {\n         if (this.rigidBody) {\n             this.rigidBody.linearVelocity = cc.v2(-this.speed, this.rigidBody.linearVelocity.y);\n             this.facingRight = false;\n             this.isMoving = true;\n         }\n     },\n\n     /**\n      * 向右移動\n      */\n     moveRight() {\n         if (this.rigidBody) {\n             this.rigidBody.linearVelocity = cc.v2(this.speed, this.rigidBody.linearVelocity.y);\n             this.facingRight = true;\n             this.isMoving = true;\n         }\n     },\n\n     /**\n      * 停止移動\n      */\n     stopMoving() {\n         if (this.rigidBody) {\n             this.rigidBody.linearVelocity = cc.v2(0, this.rigidBody.linearVelocity.y);\n             this.isMoving = false;\n         }\n     },\n\n     /**\n      * 跳躍\n      */\n     jump() {\n         if (this.isGrounded && this.rigidBody) {\n             this.rigidBody.linearVelocity = cc.v2(this.rigidBody.linearVelocity.x, this.jumpForce);\n             this.isGrounded = false;\n         }\n     },\n\n     /**\n      * 更新玩家狀態\n      */\n     updatePlayerState() {\n         if (this.rigidBody) {\n             const velocity = this.rigidBody.linearVelocity;\n             \n             // 檢查是否在地面上\n             if (velocity.y === 0) {\n                 this.isGrounded = true;\n             } else if (velocity.y < -50) {\n                 this.isGrounded = false;\n             }\n\n             // 更新精靈圖片\n             this.updateSprite();\n         }\n     },\n\n     /**\n      * 更新精靈圖片\n      */\n     updateSprite() {\n         if (this.sprite && this.sprite.node) {\n             // 根據面向方向翻轉圖片\n             this.sprite.node.scaleX = this.facingRight ? 1 : -1;\n         }\n     }\n });\n\n// #endregion ORIGINAL CODE\n\n_cjsExports = module.exports;\n\n\n}, {});\nexport { _cjsExports as default };\nexport { __cjsMetaURL }\n"]}