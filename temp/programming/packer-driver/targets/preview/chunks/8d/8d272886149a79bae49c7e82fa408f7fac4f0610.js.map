{"version":3,"sources":["file:///Users/mike/Documents/self/game-2d-demo/assets/scripts/scenes/GameScene.ts"],"names":["ccclass","property","cc","_decorator","GameScene","Node","Prefab","Component","sceneWidth","sceneHeight","platformCount","onLoad","initializeScene","start","setupScene","console","log","createBackground","createPlatforms","createPlayer","setupCamera","backgroundLayer","node","addChild","createParallaxBackground","farLayer","addComponent","Sprite","getComponent","spriteFrame","createGradientSpriteFrame","setScale","mountainLayer","createMountainSpriteFrame","setPosition","createTreeLayer","treeLayer","i","tree","createTreeSpriteFrame","Math","random","platformLayer","createGround","createFloatingPlatforms","ground","createGroundSpriteFrame","collider","BoxCollider","size","offset","v2","platform","createPlatformSpriteFrame","x","y","sin","playerLayer","player","createPlayerSpriteFrame","rigidBody","RigidBody2D","type","Type","Dynamic","gravityScale","playerController","camera","Camera","main","projection","ProjectionType","ORTHO","orthoHeight","cameraFollow","color1","color2","texture","Texture2D","canvas","document","createElement","width","height","ctx","getContext","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","initWithElement","SpriteFrame","setTexture","beginPath","moveTo","lineTo","closePath","fill","arc","PI","strokeStyle","lineWidth","stroke"],"mappings":"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","sourcesContent":["const { ccclass, property } = cc._decorator;\n\n/**\n * 遊戲場景管理器\n * 負責管理楓之谷風格的橫向捲軸場景\n */\n@ccclass('GameScene')\nexport class GameScene extends cc.Component {\n    @property(cc.Node)\n    backgroundLayer: cc.Node = null;\n\n    @property(cc.Node)\n    platformLayer: cc.Node = null;\n\n    @property(cc.Node)\n    playerLayer: cc.Node = null;\n\n    @property(cc.Node)\n    uiLayer: cc.Node = null;\n\n    @property(cc.Prefab)\n    playerPrefab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    platformPrefab: cc.Prefab = null;\n\n    @property(cc.Prefab)\n    backgroundPrefab: cc.Prefab = null;\n\n    // 場景設定\n    private sceneWidth: number = 2000;\n    private sceneHeight: number = 600;\n    private platformCount: number = 10;\n\n    onLoad() {\n        this.initializeScene();\n    }\n\n    start() {\n        this.setupScene();\n    }\n\n    /**\n     * 初始化場景\n     */\n    private initializeScene(): void {\n        console.log('遊戲場景初始化開始');\n        this.createBackground();\n        this.createPlatforms();\n        this.createPlayer();\n        this.setupCamera();\n    }\n\n    /**\n     * 建立背景\n     */\n    private createBackground(): void {\n        if (!this.backgroundLayer) {\n            this.backgroundLayer = new cc.Node('BackgroundLayer');\n            this.node.addChild(this.backgroundLayer);\n        }\n\n        // 建立多層背景以實現視差滾動\n        this.createParallaxBackground();\n    }\n\n    /**\n     * 建立視差滾動背景\n     */\n    private createParallaxBackground(): void {\n        // 遠景層\n        const farLayer = new cc.Node('FarLayer');\n        farLayer.addComponent(cc.Sprite);\n        farLayer.getComponent(cc.Sprite).spriteFrame = this.createGradientSpriteFrame('#87CEEB', '#E0F6FF');\n        farLayer.setScale(2, 1);\n        this.backgroundLayer.addChild(farLayer);\n\n        // 中景層 (山脈)\n        const mountainLayer = new cc.Node('MountainLayer');\n        mountainLayer.addComponent(cc.Sprite);\n        mountainLayer.getComponent(cc.Sprite).spriteFrame = this.createMountainSpriteFrame();\n        mountainLayer.setPosition(0, -100);\n        this.backgroundLayer.addChild(mountainLayer);\n\n        // 近景層 (樹木)\n        this.createTreeLayer();\n    }\n\n    /**\n     * 建立樹木層\n     */\n    private createTreeLayer(): void {\n        const treeLayer = new cc.Node('TreeLayer');\n        this.backgroundLayer.addChild(treeLayer);\n\n        // 建立多棵樹木\n        for (let i = 0; i < 5; i++) {\n            const tree = new cc.Node(`Tree_${i}`);\n            tree.addComponent(cc.Sprite);\n            tree.getComponent(cc.Sprite).spriteFrame = this.createTreeSpriteFrame();\n            tree.setPosition(i * 400 - 800, -200);\n            tree.setScale(0.8 + Math.random() * 0.4);\n            treeLayer.addChild(tree);\n        }\n    }\n\n    /**\n     * 建立平台\n     */\n    private createPlatforms(): void {\n        if (!this.platformLayer) {\n            this.platformLayer = new cc.Node('PlatformLayer');\n            this.node.addChild(this.platformLayer);\n        }\n\n        // 建立地面\n        this.createGround();\n        \n        // 建立浮空平台\n        this.createFloatingPlatforms();\n    }\n\n    /**\n     * 建立地面\n     */\n    private createGround(): void {\n        const ground = new cc.Node('Ground');\n        ground.addComponent(cc.Sprite);\n        ground.getComponent(cc.Sprite).spriteFrame = this.createGroundSpriteFrame();\n        ground.setPosition(0, -300);\n        ground.setScale(this.sceneWidth / 100, 1);\n        \n        // 添加物理碰撞\n        const collider = ground.addComponent(cc.BoxCollider);\n        collider.size = cc.size(this.sceneWidth, 100);\n        collider.offset = cc.v2(0, 0);\n        \n        this.platformLayer.addChild(ground);\n    }\n\n    /**\n     * 建立浮空平台\n     */\n    private createFloatingPlatforms(): void {\n        for (let i = 0; i < this.platformCount; i++) {\n            const platform = new cc.Node(`Platform_${i}`);\n            platform.addComponent(cc.Sprite);\n            platform.getComponent(cc.Sprite).spriteFrame = this.createPlatformSpriteFrame();\n            \n            const x = (i - this.platformCount / 2) * 200;\n            const y = -200 + Math.sin(i) * 100;\n            platform.setPosition(x, y);\n            platform.setScale(1 + Math.random() * 0.5);\n            \n            // 添加物理碰撞\n            const collider = platform.addComponent(cc.BoxCollider);\n            collider.size = cc.size(150, 30);\n            \n            this.platformLayer.addChild(platform);\n        }\n    }\n\n    /**\n     * 建立玩家\n     */\n    private createPlayer(): void {\n        if (!this.playerLayer) {\n            this.playerLayer = new cc.Node('PlayerLayer');\n            this.node.addChild(this.playerLayer);\n        }\n\n        const player = new cc.Node('Player');\n        player.addComponent(cc.Sprite);\n        player.getComponent(cc.Sprite).spriteFrame = this.createPlayerSpriteFrame();\n        player.setPosition(0, 0);\n        \n        // 添加物理組件\n        const rigidBody = player.addComponent(cc.RigidBody2D);\n        rigidBody.type = cc.RigidBody2D.Type.Dynamic;\n        rigidBody.gravityScale = 1;\n        \n        const collider = player.addComponent(cc.BoxCollider);\n        collider.size = cc.size(50, 80);\n        \n        // 添加玩家控制器\n        const playerController = player.addComponent(cc.Component);\n        // 這裡需要導入 PlayerController 類別\n        \n        this.playerLayer.addChild(player);\n    }\n\n    /**\n     * 設定相機\n     */\n    private setupCamera(): void {\n        const camera = cc.Camera.main;\n        if (camera) {\n            // 設定相機為 2D 模式\n            camera.projection = cc.Camera.ProjectionType.ORTHO;\n            camera.orthoHeight = 600;\n            \n            // 添加相機跟隨組件\n            const cameraFollow = camera.node.addComponent(cc.Component);\n            // 這裡需要導入 CameraFollow 類別\n        }\n    }\n\n    /**\n     * 設定場景\n     */\n    private setupScene(): void {\n        console.log('場景設定完成');\n    }\n\n    /**\n     * 建立漸層精靈框架\n     */\n    private createGradientSpriteFrame(color1: string, color2: string): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 100;\n        canvas.height = 100;\n        const ctx = canvas.getContext('2d');\n        \n        const gradient = ctx.createLinearGradient(0, 0, 0, 100);\n        gradient.addColorStop(0, color1);\n        gradient.addColorStop(1, color2);\n        \n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, 100, 100);\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n\n    /**\n     * 建立山脈精靈框架\n     */\n    private createMountainSpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 400;\n        canvas.height = 200;\n        const ctx = canvas.getContext('2d');\n        \n        // 繪製山脈\n        ctx.fillStyle = '#8B7355';\n        ctx.beginPath();\n        ctx.moveTo(0, 200);\n        ctx.lineTo(50, 150);\n        ctx.lineTo(100, 120);\n        ctx.lineTo(150, 100);\n        ctx.lineTo(200, 80);\n        ctx.lineTo(250, 90);\n        ctx.lineTo(300, 70);\n        ctx.lineTo(350, 85);\n        ctx.lineTo(400, 100);\n        ctx.lineTo(400, 200);\n        ctx.closePath();\n        ctx.fill();\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n\n    /**\n     * 建立樹木精靈框架\n     */\n    private createTreeSpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 100;\n        canvas.height = 200;\n        const ctx = canvas.getContext('2d');\n        \n        // 繪製樹幹\n        ctx.fillStyle = '#8B4513';\n        ctx.fillRect(45, 100, 10, 100);\n        \n        // 繪製樹葉\n        ctx.fillStyle = '#228B22';\n        ctx.beginPath();\n        ctx.arc(50, 100, 40, 0, Math.PI * 2);\n        ctx.fill();\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n\n    /**\n     * 建立地面精靈框架\n     */\n    private createGroundSpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 100;\n        canvas.height = 100;\n        const ctx = canvas.getContext('2d');\n        \n        // 繪製草地\n        ctx.fillStyle = '#90EE90';\n        ctx.fillRect(0, 0, 100, 100);\n        \n        // 添加草地紋理\n        ctx.fillStyle = '#7CCD7C';\n        for (let i = 0; i < 20; i++) {\n            const x = Math.random() * 100;\n            const y = Math.random() * 100;\n            ctx.fillRect(x, y, 2, 2);\n        }\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n\n    /**\n     * 建立平台精靈框架\n     */\n    private createPlatformSpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 150;\n        canvas.height = 30;\n        const ctx = canvas.getContext('2d');\n        \n        // 繪製木質平台\n        ctx.fillStyle = '#8B4513';\n        ctx.fillRect(0, 0, 150, 30);\n        \n        // 添加木紋\n        ctx.strokeStyle = '#654321';\n        ctx.lineWidth = 2;\n        for (let i = 0; i < 5; i++) {\n            ctx.beginPath();\n            ctx.moveTo(i * 30, 0);\n            ctx.lineTo(i * 30, 30);\n            ctx.stroke();\n        }\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n\n    /**\n     * 建立玩家精靈框架\n     */\n    private createPlayerSpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 50;\n        canvas.height = 80;\n        const ctx = canvas.getContext('2d');\n        \n        // 繪製簡單的玩家角色\n        // 頭部\n        ctx.fillStyle = '#FFDBAC';\n        ctx.beginPath();\n        ctx.arc(25, 60, 15, 0, Math.PI * 2);\n        ctx.fill();\n        \n        // 身體\n        ctx.fillStyle = '#FF6B6B';\n        ctx.fillRect(20, 30, 10, 30);\n        \n        // 腿部\n        ctx.fillStyle = '#4ECDC4';\n        ctx.fillRect(18, 10, 6, 20);\n        ctx.fillRect(26, 10, 6, 20);\n        \n        // 手臂\n        ctx.fillStyle = '#FFDBAC';\n        ctx.fillRect(15, 35, 5, 15);\n        ctx.fillRect(30, 35, 5, 15);\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n}\n"]}