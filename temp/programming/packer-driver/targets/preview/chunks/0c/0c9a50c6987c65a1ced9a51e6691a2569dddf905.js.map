{"version":3,"sources":["file:///Users/mike/Documents/self/game-2d-demo/assets/scripts/GameStarter.ts"],"names":["ccclass","property","cc","_decorator","GameStarter","Node","Component","onLoad","console","log","initializeGame","start","setupGame","setupPhysics","createBackground","createPlatforms","createPlayer","setupCamera","director","getPhysicsManager","enabled","gravity","v2","backgroundLayer","find","createSky","createMountains","createTrees","addParallaxEffect","sky","addComponent","Sprite","getComponent","spriteFrame","createSkySpriteFrame","setScale","setPosition","addChild","mountains","createMountainSpriteFrame","treeLayer","i","tree","createTreeSpriteFrame","Math","random","platformLayer","createGround","createFloatingPlatforms","ground","createGroundSpriteFrame","collider","BoxCollider","size","rigidBody","RigidBody2D","type","Type","Static","platform","createPlatformSpriteFrame","x","y","playerLayer","player","createPlayerSpriteFrame","Dynamic","gravityScale","camera","Camera","projection","ProjectionType","ORTHO","orthoHeight","texture","Texture2D","canvas","document","createElement","width","height","ctx","getContext","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","initWithElement","SpriteFrame","setTexture","beginPath","moveTo","lineTo","closePath","fill","arc","PI","strokeStyle","lineWidth","stroke"],"mappings":"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","sourcesContent":["const { ccclass, property } = cc._decorator;\n\n/**\n * 遊戲啟動器\n * 自動設定楓之谷風格的橫向捲軸遊戲場景\n */\n@ccclass('GameStarter')\nexport class GameStarter extends cc.Component {\n    @property(cc.Node)\n    backgroundLayer: cc.Node = null;\n\n    @property(cc.Node)\n    platformLayer: cc.Node = null;\n\n    @property(cc.Node)\n    playerLayer: cc.Node = null;\n\n    @property(cc.Node)\n    uiLayer: cc.Node = null;\n\n    @property(cc.Node)\n    camera: cc.Node = null;\n\n    onLoad() {\n        console.log('🎮 楓之谷風格遊戲啟動中...');\n        this.initializeGame();\n    }\n\n    start() {\n        this.setupGame();\n    }\n\n    /**\n     * 初始化遊戲\n     */\n    private initializeGame(): void {\n        // 設定物理系統\n        this.setupPhysics();\n        \n        // 建立背景\n        this.createBackground();\n        \n        // 建立平台\n        this.createPlatforms();\n        \n        // 建立玩家\n        this.createPlayer();\n        \n        // 設定相機\n        this.setupCamera();\n        \n        console.log('✅ 遊戲初始化完成！');\n    }\n\n    /**\n     * 設定物理系統\n     */\n    private setupPhysics(): void {\n        // 啟用物理系統\n        cc.director.getPhysicsManager().enabled = true;\n        cc.director.getPhysicsManager().gravity = cc.v2(0, -980);\n        \n        console.log('⚡ 物理系統已啟用');\n    }\n\n    /**\n     * 建立背景\n     */\n    private createBackground(): void {\n        if (!this.backgroundLayer) {\n            this.backgroundLayer = cc.find('BackgroundLayer');\n        }\n\n        if (this.backgroundLayer) {\n            // 建立天空\n            this.createSky();\n            \n            // 建立山脈\n            this.createMountains();\n            \n            // 建立樹木\n            this.createTrees();\n            \n            // 添加視差滾動\n            this.addParallaxEffect();\n            \n            console.log('🌅 背景建立完成');\n        }\n    }\n\n    /**\n     * 建立天空\n     */\n    private createSky(): void {\n        const sky = new cc.Node('Sky');\n        sky.addComponent(cc.Sprite);\n        sky.getComponent(cc.Sprite).spriteFrame = this.createSkySpriteFrame();\n        sky.setScale(3, 2);\n        sky.setPosition(0, 200);\n        this.backgroundLayer.addChild(sky);\n    }\n\n    /**\n     * 建立山脈\n     */\n    private createMountains(): void {\n        const mountains = new cc.Node('Mountains');\n        mountains.addComponent(cc.Sprite);\n        mountains.getComponent(cc.Sprite).spriteFrame = this.createMountainSpriteFrame();\n        mountains.setPosition(0, -100);\n        mountains.setScale(2, 1);\n        this.backgroundLayer.addChild(mountains);\n    }\n\n    /**\n     * 建立樹木\n     */\n    private createTrees(): void {\n        const treeLayer = new cc.Node('TreeLayer');\n        this.backgroundLayer.addChild(treeLayer);\n\n        for (let i = 0; i < 5; i++) {\n            const tree = new cc.Node(`Tree_${i}`);\n            tree.addComponent(cc.Sprite);\n            tree.getComponent(cc.Sprite).spriteFrame = this.createTreeSpriteFrame();\n            tree.setPosition(i * 300 - 600, -200);\n            tree.setScale(0.8 + Math.random() * 0.4);\n            treeLayer.addChild(tree);\n        }\n    }\n\n    /**\n     * 添加視差效果\n     */\n    private addParallaxEffect(): void {\n        // 這裡可以添加 ParallaxBackground 組件\n        console.log('🌊 視差滾動效果已添加');\n    }\n\n    /**\n     * 建立平台\n     */\n    private createPlatforms(): void {\n        if (!this.platformLayer) {\n            this.platformLayer = cc.find('PlatformLayer');\n        }\n\n        if (this.platformLayer) {\n            // 建立地面\n            this.createGround();\n            \n            // 建立浮空平台\n            this.createFloatingPlatforms();\n            \n            console.log('🏗️ 平台建立完成');\n        }\n    }\n\n    /**\n     * 建立地面\n     */\n    private createGround(): void {\n        const ground = new cc.Node('Ground');\n        ground.addComponent(cc.Sprite);\n        ground.getComponent(cc.Sprite).spriteFrame = this.createGroundSpriteFrame();\n        ground.setPosition(0, -300);\n        ground.setScale(20, 2);\n        \n        // 添加物理碰撞\n        const collider = ground.addComponent(cc.BoxCollider);\n        collider.size = cc.size(2000, 200);\n        \n        const rigidBody = ground.addComponent(cc.RigidBody2D);\n        rigidBody.type = cc.RigidBody2D.Type.Static;\n        \n        this.platformLayer.addChild(ground);\n    }\n\n    /**\n     * 建立浮空平台\n     */\n    private createFloatingPlatforms(): void {\n        for (let i = 0; i < 5; i++) {\n            const platform = new cc.Node(`Platform_${i}`);\n            platform.addComponent(cc.Sprite);\n            platform.getComponent(cc.Sprite).spriteFrame = this.createPlatformSpriteFrame();\n            \n            const x = i * 200 - 400;\n            const y = -100 + i * 50;\n            platform.setPosition(x, y);\n            platform.setScale(1 + Math.random() * 0.5);\n            \n            // 添加物理碰撞\n            const collider = platform.addComponent(cc.BoxCollider);\n            collider.size = cc.size(150, 30);\n            \n            const rigidBody = platform.addComponent(cc.RigidBody2D);\n            rigidBody.type = cc.RigidBody2D.Type.Static;\n            \n            this.platformLayer.addChild(platform);\n        }\n    }\n\n    /**\n     * 建立玩家\n     */\n    private createPlayer(): void {\n        if (!this.playerLayer) {\n            this.playerLayer = cc.find('PlayerLayer');\n        }\n\n        if (this.playerLayer) {\n            const player = new cc.Node('Player');\n            player.addComponent(cc.Sprite);\n            player.getComponent(cc.Sprite).spriteFrame = this.createPlayerSpriteFrame();\n            player.setPosition(0, 0);\n            \n            // 添加物理組件\n            const rigidBody = player.addComponent(cc.RigidBody2D);\n            rigidBody.type = cc.RigidBody2D.Type.Dynamic;\n            rigidBody.gravityScale = 1;\n            \n            const collider = player.addComponent(cc.BoxCollider);\n            collider.size = cc.size(50, 80);\n            \n            this.playerLayer.addChild(player);\n            \n            console.log('👤 玩家建立完成');\n        }\n    }\n\n    /**\n     * 設定相機\n     */\n    private setupCamera(): void {\n        if (!this.camera) {\n            this.camera = cc.find('Main Camera');\n        }\n\n        if (this.camera) {\n            const camera = this.camera.getComponent(cc.Camera);\n            if (camera) {\n                camera.projection = cc.Camera.ProjectionType.ORTHO;\n                camera.orthoHeight = 600;\n            }\n            \n            console.log('📷 相機設定完成');\n        }\n    }\n\n    /**\n     * 設定遊戲\n     */\n    private setupGame(): void {\n        console.log('🎯 遊戲設定完成！');\n        console.log('🎮 使用 WASD 或方向鍵控制玩家移動');\n        console.log('🦘 按空白鍵跳躍');\n    }\n\n    // 精靈框架建立方法\n    private createSkySpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 200;\n        canvas.height = 200;\n        const ctx = canvas.getContext('2d');\n        \n        const gradient = ctx.createLinearGradient(0, 0, 0, 200);\n        gradient.addColorStop(0, '#87CEEB');\n        gradient.addColorStop(0.7, '#E0F6FF');\n        gradient.addColorStop(1, '#F0F8FF');\n        \n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, 200, 200);\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n\n    private createMountainSpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 400;\n        canvas.height = 200;\n        const ctx = canvas.getContext('2d');\n        \n        ctx.fillStyle = '#8B7355';\n        ctx.beginPath();\n        ctx.moveTo(0, 200);\n        ctx.lineTo(50, 150);\n        ctx.lineTo(100, 120);\n        ctx.lineTo(150, 100);\n        ctx.lineTo(200, 80);\n        ctx.lineTo(250, 90);\n        ctx.lineTo(300, 70);\n        ctx.lineTo(350, 85);\n        ctx.lineTo(400, 100);\n        ctx.lineTo(400, 200);\n        ctx.closePath();\n        ctx.fill();\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n\n    private createTreeSpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 100;\n        canvas.height = 200;\n        const ctx = canvas.getContext('2d');\n        \n        // 樹幹\n        ctx.fillStyle = '#8B4513';\n        ctx.fillRect(45, 100, 10, 100);\n        \n        // 樹葉\n        ctx.fillStyle = '#228B22';\n        ctx.beginPath();\n        ctx.arc(50, 100, 40, 0, Math.PI * 2);\n        ctx.fill();\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n\n    private createGroundSpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 100;\n        canvas.height = 100;\n        const ctx = canvas.getContext('2d');\n        \n        ctx.fillStyle = '#90EE90';\n        ctx.fillRect(0, 0, 100, 100);\n        \n        ctx.fillStyle = '#7CCD7C';\n        for (let i = 0; i < 20; i++) {\n            const x = Math.random() * 100;\n            const y = Math.random() * 100;\n            ctx.fillRect(x, y, 2, 2);\n        }\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n\n    private createPlatformSpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 150;\n        canvas.height = 30;\n        const ctx = canvas.getContext('2d');\n        \n        ctx.fillStyle = '#8B4513';\n        ctx.fillRect(0, 0, 150, 30);\n        \n        ctx.strokeStyle = '#654321';\n        ctx.lineWidth = 2;\n        for (let i = 0; i < 5; i++) {\n            ctx.beginPath();\n            ctx.moveTo(i * 30, 0);\n            ctx.lineTo(i * 30, 30);\n            ctx.stroke();\n        }\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n\n    private createPlayerSpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 50;\n        canvas.height = 80;\n        const ctx = canvas.getContext('2d');\n        \n        // 頭部\n        ctx.fillStyle = '#FFDBAC';\n        ctx.beginPath();\n        ctx.arc(25, 60, 15, 0, Math.PI * 2);\n        ctx.fill();\n        \n        // 身體\n        ctx.fillStyle = '#FF6B6B';\n        ctx.fillRect(20, 30, 10, 30);\n        \n        // 腿部\n        ctx.fillStyle = '#4ECDC4';\n        ctx.fillRect(18, 10, 6, 20);\n        ctx.fillRect(26, 10, 6, 20);\n        \n        // 手臂\n        ctx.fillStyle = '#FFDBAC';\n        ctx.fillRect(15, 35, 5, 15);\n        ctx.fillRect(30, 35, 5, 15);\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n}\n"]}