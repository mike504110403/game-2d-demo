{"version":3,"sources":["file:///Users/mike/Documents/self/game-2d-demo/assets/scripts/utils/SceneLoader.ts"],"names":["SceneLoader","loadGameScene","cc","director","loadScene","console","log","error","createBasicSceneStructure","scene","Node","backgroundLayer","addChild","platformLayer","playerLayer","uiLayer","createMapleStoryBackground","parent","sky","addComponent","Sprite","getComponent","spriteFrame","createSkySpriteFrame","setScale","setPosition","mountains","createMountainSpriteFrame","trees","i","tree","createTreeSpriteFrame","Math","random","createBasicPlatforms","ground","createGroundSpriteFrame","groundCollider","BoxCollider","size","groundRigidBody","RigidBody2D","type","Type","Static","platform","createPlatformSpriteFrame","platformCollider","platformRigidBody","createPlayer","player","createPlayerSpriteFrame","rigidBody","Dynamic","gravityScale","collider","setupCameraFollow","target","camera","Camera","main","projection","ProjectionType","ORTHO","orthoHeight","texture","Texture2D","canvas","document","createElement","width","height","ctx","getContext","gradient","createLinearGradient","addColorStop","fillStyle","fillRect","initWithElement","SpriteFrame","setTexture","beginPath","moveTo","lineTo","closePath","fill","arc","PI","x","y","strokeStyle","lineWidth","stroke"],"mappings":"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","sourcesContent":["/**\n * 場景載入器\n * 幫助快速載入和設定楓之谷風格的遊戲場景\n */\nexport class SceneLoader {\n    /**\n     * 載入遊戲場景\n     */\n    public static async loadGameScene(): Promise<void> {\n        try {\n            // 載入場景\n            await cc.director.loadScene('GamePlay');\n            console.log('遊戲場景載入成功');\n        } catch (error) {\n            console.error('載入場景失敗:', error);\n        }\n    }\n\n    /**\n     * 建立基本場景結構\n     */\n    public static createBasicSceneStructure(): cc.Node {\n        const scene = new cc.Node('GameScene');\n        \n        // 建立背景層\n        const backgroundLayer = new cc.Node('BackgroundLayer');\n        scene.addChild(backgroundLayer);\n        \n        // 建立平台層\n        const platformLayer = new cc.Node('PlatformLayer');\n        scene.addChild(platformLayer);\n        \n        // 建立玩家層\n        const playerLayer = new cc.Node('PlayerLayer');\n        scene.addChild(playerLayer);\n        \n        // 建立UI層\n        const uiLayer = new cc.Node('UILayer');\n        scene.addChild(uiLayer);\n        \n        return scene;\n    }\n\n    /**\n     * 建立楓之谷風格的背景\n     */\n    public static createMapleStoryBackground(parent: cc.Node): void {\n        // 天空背景\n        const sky = new cc.Node('Sky');\n        sky.addComponent(cc.Sprite);\n        sky.getComponent(cc.Sprite).spriteFrame = this.createSkySpriteFrame();\n        sky.setScale(3, 2);\n        sky.setPosition(0, 200);\n        parent.addChild(sky);\n\n        // 山脈背景\n        const mountains = new cc.Node('Mountains');\n        mountains.addComponent(cc.Sprite);\n        mountains.getComponent(cc.Sprite).spriteFrame = this.createMountainSpriteFrame();\n        mountains.setPosition(0, -100);\n        mountains.setScale(2, 1);\n        parent.addChild(mountains);\n\n        // 樹木背景\n        const trees = new cc.Node('Trees');\n        parent.addChild(trees);\n        \n        for (let i = 0; i < 5; i++) {\n            const tree = new cc.Node(`Tree_${i}`);\n            tree.addComponent(cc.Sprite);\n            tree.getComponent(cc.Sprite).spriteFrame = this.createTreeSpriteFrame();\n            tree.setPosition(i * 300 - 600, -200);\n            tree.setScale(0.8 + Math.random() * 0.4);\n            trees.addChild(tree);\n        }\n    }\n\n    /**\n     * 建立基本平台\n     */\n    public static createBasicPlatforms(parent: cc.Node): void {\n        // 地面\n        const ground = new cc.Node('Ground');\n        ground.addComponent(cc.Sprite);\n        ground.getComponent(cc.Sprite).spriteFrame = this.createGroundSpriteFrame();\n        ground.setPosition(0, -300);\n        ground.setScale(20, 2);\n        \n        // 添加物理碰撞\n        const groundCollider = ground.addComponent(cc.BoxCollider);\n        groundCollider.size = cc.size(2000, 200);\n        \n        const groundRigidBody = ground.addComponent(cc.RigidBody2D);\n        groundRigidBody.type = cc.RigidBody2D.Type.Static;\n        \n        parent.addChild(ground);\n\n        // 浮空平台\n        for (let i = 0; i < 5; i++) {\n            const platform = new cc.Node(`Platform_${i}`);\n            platform.addComponent(cc.Sprite);\n            platform.getComponent(cc.Sprite).spriteFrame = this.createPlatformSpriteFrame();\n            platform.setPosition(i * 200 - 400, -100 + i * 50);\n            platform.setScale(1 + Math.random() * 0.5);\n            \n            // 添加物理碰撞\n            const platformCollider = platform.addComponent(cc.BoxCollider);\n            platformCollider.size = cc.size(150, 30);\n            \n            const platformRigidBody = platform.addComponent(cc.RigidBody2D);\n            platformRigidBody.type = cc.RigidBody2D.Type.Static;\n            \n            parent.addChild(platform);\n        }\n    }\n\n    /**\n     * 建立玩家角色\n     */\n    public static createPlayer(parent: cc.Node): cc.Node {\n        const player = new cc.Node('Player');\n        player.addComponent(cc.Sprite);\n        player.getComponent(cc.Sprite).spriteFrame = this.createPlayerSpriteFrame();\n        player.setPosition(0, 0);\n        \n        // 添加物理組件\n        const rigidBody = player.addComponent(cc.RigidBody2D);\n        rigidBody.type = cc.RigidBody2D.Type.Dynamic;\n        rigidBody.gravityScale = 1;\n        \n        const collider = player.addComponent(cc.BoxCollider);\n        collider.size = cc.size(50, 80);\n        \n        parent.addChild(player);\n        return player;\n    }\n\n    /**\n     * 設定相機跟隨\n     */\n    public static setupCameraFollow(target: cc.Node): void {\n        const camera = cc.Camera.main;\n        if (camera && target) {\n            // 設定相機為 2D 模式\n            camera.projection = cc.Camera.ProjectionType.ORTHO;\n            camera.orthoHeight = 600;\n            \n            // 添加相機跟隨腳本\n            // 這裡需要添加 CameraFollow 組件\n            console.log('相機跟隨設定完成');\n        }\n    }\n\n    // 精靈框架建立方法\n    private static createSkySpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 200;\n        canvas.height = 200;\n        const ctx = canvas.getContext('2d');\n        \n        const gradient = ctx.createLinearGradient(0, 0, 0, 200);\n        gradient.addColorStop(0, '#87CEEB');\n        gradient.addColorStop(0.7, '#E0F6FF');\n        gradient.addColorStop(1, '#F0F8FF');\n        \n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, 200, 200);\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n\n    private static createMountainSpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 400;\n        canvas.height = 200;\n        const ctx = canvas.getContext('2d');\n        \n        ctx.fillStyle = '#8B7355';\n        ctx.beginPath();\n        ctx.moveTo(0, 200);\n        ctx.lineTo(50, 150);\n        ctx.lineTo(100, 120);\n        ctx.lineTo(150, 100);\n        ctx.lineTo(200, 80);\n        ctx.lineTo(250, 90);\n        ctx.lineTo(300, 70);\n        ctx.lineTo(350, 85);\n        ctx.lineTo(400, 100);\n        ctx.lineTo(400, 200);\n        ctx.closePath();\n        ctx.fill();\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n\n    private static createTreeSpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 100;\n        canvas.height = 200;\n        const ctx = canvas.getContext('2d');\n        \n        // 樹幹\n        ctx.fillStyle = '#8B4513';\n        ctx.fillRect(45, 100, 10, 100);\n        \n        // 樹葉\n        ctx.fillStyle = '#228B22';\n        ctx.beginPath();\n        ctx.arc(50, 100, 40, 0, Math.PI * 2);\n        ctx.fill();\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n\n    private static createGroundSpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 100;\n        canvas.height = 100;\n        const ctx = canvas.getContext('2d');\n        \n        ctx.fillStyle = '#90EE90';\n        ctx.fillRect(0, 0, 100, 100);\n        \n        ctx.fillStyle = '#7CCD7C';\n        for (let i = 0; i < 20; i++) {\n            const x = Math.random() * 100;\n            const y = Math.random() * 100;\n            ctx.fillRect(x, y, 2, 2);\n        }\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n\n    private static createPlatformSpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 150;\n        canvas.height = 30;\n        const ctx = canvas.getContext('2d');\n        \n        ctx.fillStyle = '#8B4513';\n        ctx.fillRect(0, 0, 150, 30);\n        \n        ctx.strokeStyle = '#654321';\n        ctx.lineWidth = 2;\n        for (let i = 0; i < 5; i++) {\n            ctx.beginPath();\n            ctx.moveTo(i * 30, 0);\n            ctx.lineTo(i * 30, 30);\n            ctx.stroke();\n        }\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n\n    private static createPlayerSpriteFrame(): cc.SpriteFrame {\n        const texture = new cc.Texture2D();\n        const canvas = document.createElement('canvas');\n        canvas.width = 50;\n        canvas.height = 80;\n        const ctx = canvas.getContext('2d');\n        \n        // 頭部\n        ctx.fillStyle = '#FFDBAC';\n        ctx.beginPath();\n        ctx.arc(25, 60, 15, 0, Math.PI * 2);\n        ctx.fill();\n        \n        // 身體\n        ctx.fillStyle = '#FF6B6B';\n        ctx.fillRect(20, 30, 10, 30);\n        \n        // 腿部\n        ctx.fillStyle = '#4ECDC4';\n        ctx.fillRect(18, 10, 6, 20);\n        ctx.fillRect(26, 10, 6, 20);\n        \n        // 手臂\n        ctx.fillStyle = '#FFDBAC';\n        ctx.fillRect(15, 35, 5, 15);\n        ctx.fillRect(30, 35, 5, 15);\n        \n        texture.initWithElement(canvas);\n        const spriteFrame = new cc.SpriteFrame();\n        spriteFrame.setTexture(texture);\n        return spriteFrame;\n    }\n}\n"]}